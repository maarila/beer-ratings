<div class="container">
  <h1>Ratings</h1>
  <div class="row">
    <div class="col-sm">

      <h2>Best beers</h2>
      <%= render 'toplist', ranked: @top_beers %>
    </div>

    <div class="col-sm">
      <h2>Best breweries</h2>
      <%= render 'toplist', ranked: @top_breweries %>
    </div>

    <div class="col-sm">
      <h2>Best styles</h2>
      <%= render 'toplist', ranked: @top_styles %>
    </div>

  </div>

  <h2>Most active users</h2>
  <table class="table table-striped table-hover table-sm">
    <thead>
      <tr>
        <th></th>
        <th>ratings</th>
      </tr>
    </thead>
    <tbody>
      <% @active_users.each do |user| %>
        <% if user.ratings.count > 0 %>
          <tr>
            <td><%= user.username %></td>
            <td><%= user.ratings.count %></td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>

  <h2>Recent ratings</h2>

  <% @latest_ratings.each do |rating| %>
    <ul class="list-group list-group-flush">
      <li class="list-group-item">
        <%= link_to rating.beer.name, rating.beer %> by <%= link_to rating.user.username, rating.user %> at <%= rating.updated_at %>
      </li>
    </ul>
  <% end %>
  <br>

  <%= link_to('New Rating', new_rating_path, class: 'btn btn-primary') if current_user %>
</div>
